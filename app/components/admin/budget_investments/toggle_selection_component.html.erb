<% if investment.selected? %>
  <%= link_to_if can?(:toggle_selection, investment),
                 t("admin.budget_investments.index.selected"),
                 toggle_selection_admin_budget_budget_investment_path(
                   budget,
                   investment,
                   filter: params[:filter],
                   sort_by: params[:sort_by],
                   min_total_supports: params[:min_total_supports],
                   max_total_supports: params[:max_total_supports],
                   advanced_filters: params[:advanced_filters],
                   page: params[:page]
                 ),
                 method: :patch,
                 remote: true,
                 class: "button small expanded" %>
<% elsif investment.feasible? && investment.valuation_finished? %>
  <% if can?(:toggle_selection, investment) %>
    <%= link_to t("admin.budget_investments.index.select"),
                toggle_selection_admin_budget_budget_investment_path(
                  budget,
                  investment,
                  filter: params[:filter],
                  sort_by: params[:sort_by],
                  min_total_supports: params[:min_total_supports],
                  max_total_supports: params[:max_total_supports],
                  advanced_filters: params[:advanced_filters],
                  page: params[:page]
                ),
                method: :patch,
                remote: true,
                class: "button small hollow expanded" %>
  <% end %>
<% end %>
